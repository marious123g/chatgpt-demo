---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import Generator from '../components/Generator'
import '../message.css'
import 'katex/dist/katex.min.css'
import 'highlight.js/styles/atom-one-dark.css'
---

<Layout title="ChatGPT API Demo">
    <main>
        <Header/>
        <Generator client:load/>
        <Footer/>
    </main>
</Layout>

<script>
    // 检查用户登录状态，如未登录则跳转
    const username=window.sessionStorage.getItem("username")
    console.log("当前登录用户：",username)
    if(username==''||username==null) {
        window.location.href = '/login';
    }
    // async function checkCurrentAuth() {
    //     const password = localStorage.getItem('pass')
    //     const response = await fetch('/api/auth', {
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/json',
    //         },
    //         body: JSON.stringify({
    //             pass: password,
    //         }),
    //     })
    //     const responseJson = await response.json()
    //     if (responseJson.code !== 0)
    //         window.location.href = '/password'
    // }
    // checkCurrentAuth()
</script>
